# 什么是 列式存储(Columnar or column-based)？

列式存储(Columnar or column-based)是相对于传统关系型数据库的行式存储(Row-basedstorage)来说的。

一个OLAP类型的查询可能需要访问几百万甚至几十亿个数据行
	且该查询往往只关心少数几个数据列。
	例如，查询今年销量最高的前20个商品
		这个查询只关心三个数据列：时间（date）、商品（item）以及销售量（sales amount）。

列式数据库是将同一个数据列的各个值存放在一起
	插入某个数据行时，该行的各个数据列的值也会存放到不同的地方。

上例中列式数据库只需要读取存储着“时间、商品、销量”的数据列
	而行式数据库需要读取所有的数据列
		因此，列式数据库大大地提高了OLAP大数据量查询的效率。
	当然，列式数据库不是万能的，每次读取某个数据行时
		需要分别从不同的地方读取各个数据列的值，然后合并在一起形成数据行。
	因此，如果每次查询涉及的数据量较小或者大部分查询都需要整行的数据，列式数据库并不适用。

由于同一个数据列的数据重复度很高，因此，列式数据库压缩时有很大的优势。
	例如，Google Bigtable列式数据库对网页库压缩可以达到15倍以上的压缩率。

可以针对列式存储做专门的索引优化。
	比如，性别列只有两个值，“男”和“女”，可以对这一列建立位图索引：
		“男”对应的位图为100101，表示第1、4、6行值为“男”
			“女”对应的位图为011010，表示第2、3、5行值为“女”
		如果需要查找男性或者女性的个数，只需要统计相应的位图中1出现的次数即可
	另外，建立位图索引后0和1的重复度高，可以采用专门的编码方式对其进行压缩。

## 总结
	基于一列或比较少的列计算的时候
	经常关注一张表某几列而非整表数据的时候
	数据表拥有非常多的列的时候
	数据表有非常多行数据并且需要聚集运算的时候
	数据表列里有非常多的重复数据，有利于高度压缩